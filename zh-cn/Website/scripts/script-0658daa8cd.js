"use strict";!function(t){var a="http://uhome.haier.net:7500/emuplus/",s="http://uhome.haier.net/omsva/",n="",i="",c="",e=navigator.userAgent.toLowerCase();/iphone|ipad|ipod/.test(e)?(i="MB-UZHSH-0001",c="5dfca8714eb26e3a776e58a8273c8752"):/android/.test(e)&&(i="MB-UZHSH-0000",c="f50c76fbc8271d361e1f6b5973f54585"),console.log("appId的值是"+i+"appKey的值是"+c);var r=function(e,o){var n,t="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split(""),a=[];if(o=o||t.length,e)for(n=0;n<e;n++)a[n]=t[0|Math.random()*o];else{var s;for(a[8]=a[13]=a[18]=a[23]="-",a[14]="4",n=0;n<36;n++)a[n]||(s=0|16*Math.random(),a[n]=t[19==n?3&s|8:s])}return a.join("")}(13,10);console.log(r);var o=window.location.href;console.log(o);var d={};if(o.match(/\?/))for(var u=o.split("?")[1].split("&"),l=0;l<u.length;l++){var p=u[l].indexOf("=");if(0<p){var h=u[l].substring(0,p),m=u[l].substr(p+1);d[decodeURIComponent(h)]=decodeURIComponent(m)}}console.log(d),"0"==d.type&&(t("#page_down").css("display","block"),t("#page_active").css("display","none")),d.newCampaign?(t("#getUser").css("display","none"),t("#getUAPP").css("display","none")):t("#getUAPP_new").css("display","none");var f="javascript:void(0);";function g(){return"micromessenger"==window.navigator.userAgent.toLowerCase().match(/MicroMessenger/i)}t.ajax({type:"POST",url:s+"inp/query",dataType:"json",contentType:"application/json; charset=utf-8",data:JSON.stringify({sourceOptId:d.sourceOptId})}).done(function(e){if("00000"==e.retCode)for(var o in e.data.items)"1"==e.data.items[o].platform&&(t("#andeoid_UAPP").removeClass("takeGary"),t("#andeoid_UAPP_new").removeClass("takeGary"),f=e.data.items[o].downloadUrl),"2"==e.data.items[o].platform&&(t("#ios_UAPP").removeClass("takeGary"),t("#ios_UAPP_new").removeClass("takeGary"),t("#ios_UAPP").attr("href",e.data.items[o].downloadUrl),t("#ios_UAPP_new").attr("href",e.data.items[o].downloadUrl))}),t(document).ready(function(){if(!document.getElementById)return!1;document.getElementById("andeoid_UAPP").onclick=function(e){window.event?window.event.cancelBubble=!0:e.stopPropagation(),stm_clicki("send","event","安卓下载","点击","下载按钮"),g()?(t("#mask_open").show(),t("#mask_open").click(function(){t(this).hide()})):window.location.href=f},document.getElementById("andeoid_UAPP_new").onclick=function(e){window.event?window.event.cancelBubble=!0:e.stopPropagation(),stm_clicki("send","event","安卓下载","点击","下载按钮"),g()?(t("#mask_open").show(),t("#mask_open").click(function(){t(this).hide()})):window.location.href=f}});var v=function(){t.ajax({type:"GET",url:a+"secuag/account/v1.0/captcha",contentType:"application/json; charset=utf-8"}).done(function(e){if("00000"==e.retCode){n=e.data.captcha.token;var o=e.data.captcha.image;t(".checkImg").attr("src",o),console.log(e.data.captcha)}}).fail(function(e,o,n){})};v(),t("#phoneNum").on("input propertychange",function(){0<t("#phoneNum").val().length&&(t("#imgCheck").fadeIn("slow"),t("#msgCheck").fadeIn("slow"))}),t("#checkImg").on("click",function(){v()});t("#getMsgNum").on("click",function(){t(this).attr("disabled",!0),""==t("#phoneNum").val()?(t("#nullPhone").show(),setTimeout(function(){t("#nullPhone").hide()},2e3)):""==t("#phoneNum").val()||t("#phoneNum").val().match(/^1[3|4|5|7|8][0-9]{9}$/)?t.ajax({type:"POST",url:a+"secuag/account/v1.0/sms",dataType:"json",contentType:"application/json; charset=utf-8",data:JSON.stringify({phone:t("#phoneNum").val(),scenario:"login",captchaToken:n,captchaAnswer:t("#checkNum").val()})}).done(function(e){console.log(e.data),"00000"==e.retCode&&e.data.delay&&(!function(){t("#getMsgNum").hide(),t("#J_second").html("60"),t("#resetMsgNum").show();var e=60,o=null;o=setInterval(function(){0<(e-=1)?t("#J_second").html(e):(clearInterval(o),t("#getMsgNum").show(),t("#resetMsgNum").hide())},1e3)}(),t("#getMsgNum").text("再次获取")),"10022"==e.retCode?(t("#errImg1").show(),setTimeout(function(){t("#errImg1").hide()},2e3)):"captcha_answer_error"==e.retCode?(t("#errImg2").show(),setTimeout(function(){t("#errImg2").hide()},2e3)):"13000"==e.retCode&&(t("#errImg3").show(),setTimeout(function(){t("#errImg3").hide()},2e3))}).fail(function(){t("#interErr").show(),setTimeout(function(){t("#interErr").hide()},2e3)}):(t("#errPhone").show(),setTimeout(function(){t("#errPhone").hide()},2e3))}),t("#receive").on("click",function(){""==t("#phoneNum").val()?(t("#nullPhone").show(),setTimeout(function(){t("#nullPhone").hide()},2e3)):""==t("#phoneNum").val()||t("#phoneNum").val().match(/^1[3|4|5|7|8][0-9]{9}$/)?(console.log(r+"立即领取按钮"),t.ajax({type:"POST",url:a+"secuag/account/v1.0/loginBySMS",dataType:"json",contentType:"application/json; charset=utf-8",headers:{appId:i,appKey:c,clientId:r,timestamp:t.now()},data:JSON.stringify({phone:t("#phoneNum").val(),smsCode:t("#msgNum").val()})}).done(function(e){if("00000"==e.retCode){var o=e.data.tokenInfo.uhomeAccessToken,n=e.data.tokenInfo.accountToken;console.log(o+"---uhomeAccessToken"),console.log(n+"---accountToken"),t.ajax({type:"POST",url:s+"sourceopt/checkUser",dataType:"json",contentType:"application/json; charset=utf-8",headers:{accountToken:n}}).done(function(e){if("00000"==e.retCode){var o=e.data.isRegisterUser;o?(o="2",t("#getUser").hide(),t("#success").show()):(o="1",t("#getUser").hide(),t("#again").show()),t.ajax({type:"POST",url:s+"log/create",dataType:"json",contentType:"application/json; charset=utf-8",data:JSON.stringify({sourceName:d.sourceName,userName:t("#phoneNum").val(),comeFrom:"渠道H5页面",type:o,sku:d.sku,xh:d.xh,productId:d.ProductId,sourceOptId:d.sourceOptId})}).done(function(e){console.log("记录注册登录日志---通了")}).fail(function(e){console.log("记录注册登录日志---不通")})}}).fail(function(){console.log("检查用户是新注册或者是登录用户不通")}),t.ajax({type:"POST",url:a+"device/v3.0/getDevices",dataType:"json",contentType:"application/json; charset=utf-8",headers:{appId:i,appKey:c,clientId:r,appVersion:"3.4.0",accessToken:o,timestamp:t.now()},data:JSON.stringify({familyId:""})}).done(function(e){console.log("111111获取设备列表接口通了")}).fail(function(){console.log("222222获取设备列表接口不通")})}else""==t("#msgNum").val()?(t("#nullMsg").show(),setTimeout(function(){t("#nullMsg").hide()},2e3)):(t("#errMsg").show(),setTimeout(function(){t("#errMsg").hide()},2e3))}).fail(function(){t("#interErr").show(),setTimeout(function(){t("#interErr").hide()},2e3)})):(t("#errPhone").show(),setTimeout(function(){t("#errPhone").hide()},2e3))});var w=function(e){e.preventDefault()};t("#act_des").on("click",function(e){e&&e.stopPropagation?e.stopPropagation():window.event&&(window.event.cancelBubble=!0),t("#mask_rules").show(),t("body").css("overflow","hidden"),document.addEventListener("touchmove",w,!1)}),t("#event_details").on("click",function(e){e&&e.stopPropagation?e.stopPropagation():window.event&&(window.event.cancelBubble=!0),t("#mask_about_uapp").show(),t("body").css("overflow","hidden"),document.addEventListener("touchmove",w,!1)}),t(".close").click(function(){t("#mask_about_uapp").hide(),t("#mask_rules").hide(),t("#mask_success").hide(),t("#mask_return").hide(),t("#mask_over").hide(),t("#mask_errer").hide(),t("body").css("overflow","auto"),document.removeEventListener("touchmove",w,!1)})}(jQuery);